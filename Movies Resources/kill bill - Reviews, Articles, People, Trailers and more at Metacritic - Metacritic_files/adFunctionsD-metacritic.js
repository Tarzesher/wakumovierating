
    
function CbsiMantaRay(){var N=this;var m="$Id: MantaRay.js 177696 2013-09-25 17:34:29Z monicak $";var r="5.0.7";var R;var z=2000;var d="&";var B=false;var AE=new Array();var AM=new Object();var p=[];var x;var b=2000;var AH=1;switch(parseInt("50")){default:break}var f={};var L;var i;var T={CAT:"NCAT"};var AP=0*1000;switch(parseInt("50")){case 175:AP=5*1000;break}var AB=AP;var g="";var D="";this.registerAdGlobals=function(AU){if(AU){f=AU;E(AU);var AT="";for(var AV in AU){AT+=AV+"='"+AU[AV]+"', "}n("registerAdGlobals: Saved Global object. Params: "+AT)}};var q=function(){return(B==true)};var E=function(AT){if("NO".toLowerCase()=="yes"){B=true}else{for(var AU in AT){if(!AT.hasOwnProperty(AU)){continue}if(AU.toLowerCase()=="partner"&&AT[AU]){B=true}}}AS=U()};var U=function(){if(q()){return"cbsi.com"}var AT=document.domain.split(".").reverse();var AU=AT[1]+"."+AT[0];return AU};var AS=U();var X=function(){var AT="unk";if(navigator.userLanguage){AT=navigator.userLanguage}else{if(navigator.language){AT=navigator.language}}return AT};var k=function(AT){var AV=Z;var AW=AA;var AU=parseInt(AT.SITE);if(AT.DVAR_SESSION!=undefined){L={DVAR_SESSION:AT.DVAR_SESSION}}if("live"=="qa1"){switch(AU){case 1:S(AT,AV(AU));S(AT,AW());break;default:}}else{switch(AU){case 2:S(AT,AV(AU));break;case 19:S(AT,AW());break;case 45:S(AT,AV(AU));S(AT,AW());break;case 90:S(AT,AV(AU));break;case 103:S(AT,AV(AU));break;case 162:S(AT,AV(AU));break;case 175:S(AT,AW());break;case 177:S(AT,AW());break;case 185:S(AT,AW());break;case 189:S(AT,AW());break;case 190:S(AT,AW());break;case 1017:S(AT,AW());break;case 1018:S(AT,AW());break;case 1019:S(AT,AW());break;case 1025:S(AT,AW());break;default:}}switch(AU){case 175:break;default:S(AT,c())}};var Z=function(AU){if(L){return L}var AV=Y("MAD_SESSION");if(!AV){var AT=["a","b","c","d","e","f"];if("live"=="qa1"){switch(AU){case 1:AT=["a","b"];break}}else{switch(AU){case 2:AT=["a","b","c","d","e","f","g","h"];break;case 162:AT=["a","b","c","d"];break}}AV=AT[Math.floor(Math.random()*AT.length)];document.cookie=("MAD_SESSION="+AV+";domain="+AS+";path=/")}L={DVAR_SESSION:AV};return L};var c=function(){if(window.cbsiMadsCookiesOn){return window.cbsiMadsCookiesOn}if(Y("XCLGFbrowser")!=null||Y("MADUCAT")!=null||Y("MADCAPP")!=null||Y("MADCAPS")!=null||Y("MAD_INTERNAL")!=null||Y("MADTEST")){window.cbsiMadsCookiesOn={cookiesOn:"1"}}else{var AT=86400000;Q("MADTEST","1",AT);if(Y("MADTEST")=="1"){window.cbsiMadsCookiesOn={cookiesOn:"1"}}else{window.cbsiMadsCookiesOn={cookiesOn:"0"}}}n("cookiesOn="+window.cbsiMadsCookiesOn.cookiesOn);return window.cbsiMadsCookiesOn};function AA(){if(i){return i}var AU=Y("MAD_FIRSTPAGE");if(!AU){AU=1;var AT=AQ(0.75);Q("MAD_FIRSTPAGE",AU,AT,AS,"/")}else{if(AU==1){AU=0;var AT=AQ(0.75);Q("MAD_FIRSTPAGE",AU,AT,AS,"/")}}i={DVAR_FIRSTPAGE:AU};return i}this.setWaitTime=function(AT){AB=AT*1000};this.storePageState=function(){AM.STATICPAGESTATE=window.CBSI_PAGESTATE;AM.USE_STATICPAGESTATE=1};this.setMacProxy=function(AT){};function H(){return location.hash=="#mad_debug"}function o(){return location.hash=="#mad_stage"}var l=window.console;var n=function(AT){if(H()){if(!l||typeof l.log!="function"){l=new O()}l.log("MantaRay: "+AT)}};var O=function(){var AT=document.getElementsByTagName("body")[0];if(!AT){return null}var AU=document.createElement("div");AU.setAttribute("id","mad_console");if(AU.style.setAttribute){AU.style.setAttribute("cssText","border:solid 2px #ff0000; background:#FFFFFF; color:#000000; padding:4px; width:600px; height:300px; overflow:auto;")}else{AU.setAttribute("style","border:solid 2px #ff0000; background:#FFFFFF; color:#000000; padding:4px; width:600px; height:300px; overflow:auto;")}AT.appendChild(AU);this.log=function(AV){AU.innerHTML=AU.innerHTML+"<hr>"+AV}};var Y=function(AV){var AW=null;var AU=document.cookie;var AY=AU.indexOf(AV);if(AY!=-1){var AX=AY+AV.length+1;var AT=AU.indexOf(";",AX);if(AT==-1){AT=AU.length}AW=AU.substring(AX,AT)}return AW};function Q(Ai,AW,AX,AY,Ah){if(AY){AY=AY.replace(/^\./,"");var Ag=AY.split(".").reverse();var AV=document.domain.split(".").reverse();var Ac=true;for(var Aa=0;Aa<Ag.length;Aa++){if(Ag[Aa].toLowerCase()!=AV[Aa].toLowerCase()){Ac=false;break}}if(!Ac){var AU="http://mads."+AY;var Af=Y("MADMACPORT");if(Af!=null){if(Af){AU+=":"+Af}}else{if(D){AU+=":"+D}}if(AW===""){AW="|";AX=-300000}AU+="/sc?c="+Ai+":"+AW+":."+AY;if(Ah=="/"){Ah=""}if(AX||Ah||parseInt(AX)===0){var Ae="";if(AX||parseInt(AX)===0){Ae=AX/60000}AU+=":"+Ae;if(Ah){AU+=":"+Ah}}var AZ=document.createElement("img");AZ.setAttribute("src",AU);return }}else{var Ab=document.domain.split(".");AY=Ab[Ab.length-2]+"."+Ab[Ab.length-1]}var AT=new Array(Ai+"="+AW,"domain=."+AY);if(AX||parseInt(AX)===0){var Ad=new Date(new Date().getTime()+AX);AT.push("expires="+Ad.toUTCString())}if(!Ah){Ah="/"}AT.push("path="+Ah);document.cookie=AT.join(";");n("Final Cookie string: '"+AT.join(";")+"'")}function e(AV){AV=AV||new Date();var AW=AV.getUTCMonth();if(AW>2&&AW<10){return true}if(AW<2||AW>10){return false}var AU=AV.getUTCDate();var AT=AV.getUTCDay();if(AW==10){if(AU>7){return false}if(AT==0){if(AV.getUTCHours()<6){return true}return false}if(AU>AT){return false}return true}if(AU<8){return false}if(AU>14){return true}if(AT==0){if(AV.getUTCHours()>6){return true}return false}if(AU-AT>7){return true}return false}function AQ(AX,AY){AY=AY||new Date();var AT=5;if(e(AY)){AT=4}var AV=(AX+AT)%24;var AU=60*AY.getUTCHours()+AY.getUTCMinutes();var AW=60*AV-AU;if(AW<0){AW=24*60+AW}return 60000*AW}var S=function(AV,AT){if(AV&&AT){for(var AU in AT){if(AT.hasOwnProperty(AU)){AV[AU]=AT[AU]}}}};function AK(AU){var AV=(AU.getMonth()+1)+"";if(1==AV.length){AV="0"+AV}var AT=AU.getDate()+"";if(1==AT.length){AT="0"+AT}return AV+AT}function AJ(AT,AW){n("jsAppend: appending file: "+AT+(AW?(", id: "+AW):""));var AV=document.createElement("script");var AU=document.getElementsByTagName("script")[0];AV.async=1;AV.src=AT;if(AW){AV.id=AW}AU.parentNode.insertBefore(AV,AU);return AV}function W(AU){var AT=document.getElementById(AU);if(AT){n("removeElementById: removing "+AU);AT.parentNode.removeChild(AT)}else{n("removeElementById: no element "+AU)}}function AG(AT){n("Appending image: "+AT);img=new Image();img.src=AT;return img}function v(AT){new Image().src="http://adlog.cbsi.com/adlog/x/"+AT+"/http://i.i.cbsi.com/cnwk.1d/Ads/common/dotclear.gif"}function y(){if(document.hidden){return"visibilitychange"}if(document.mozHidden){return"mozvisibilitychange"}if(document.msHidden){return"msvisibilitychange"}if(document.webkitHidden){return"webkitvisibilitychange"}return undefined}this.saveLocalAdObj=function(AT,AU){if(AT==undefined||typeof AT!="string"||AU==undefined||typeof AU!="object"){n("saveLocalAdObj: A string divId and local ad object must be specified.")}else{n("saveLocalAdObj: Saving object for '"+AT+"'");if(AE[AT]==undefined){AE[AT]=new Object()}AE[AT].metaAdObj=new Object();if(AU.REFRESH!=undefined){AE[AT].metaAdObj.refreshable=parseInt(AU.REFRESH)}else{AE[AT].metaAdObj.refreshable=0}AE[AT].localAdObj=AU}};this.fetchAds=function(AT,AU){n("fetchAds: Called to fetch ads.");p.push([AT,AU]);u();n("fetchAds: Done fetching ads. JSON has been added.")};var AC=new Array();this.displayAd=function(AU){if(!g){n("displayAds: ERROR: Local file for friendly iframe not yet defined.  Set file location via setDeferredLocalPage(file_loc)");return }else{if(AU==undefined){for(var AT=0;AT<AC.length;AT++){n("displayAd: Calling to display '"+AC[AT]+"'.");MRDisplayAd(AC[AT])}return }else{if(AE[AU]==undefined){n("displayAd: Unable to display ad for div '"+AU+"'. There is no ad saved under that name.");return }else{if(document.getElementById(AU)==undefined){n("displayAd: Unable to display ad for div '"+AU+"'.  A DIV with that ID does not exist in the page.");return }else{if(AE[AU].metaAdObj!=undefined&&AE[AU].metaAdObj.jsonAdObj==undefined){n("displayAd: Ad not yet done loading.  Either fetch has not yet completed or ad not yet parsed.  Setting okToDisplay to true for divId: "+AU);AE[AU].okToDisplay=1;return }else{if(visibilityChangeType=y()){v("MR5.0-hiddenPageDeferDisplay");n("displayAd: WARNING: document was hidden.  Deferring display and Logging event.");AC.push(AU);var AX=function(){if(!y()){v("MR5.0-newlyVisiblePageDisplayAd");n("displayAd: WARNING: hidden document has become visible.  Displaying Ad and Logging event.");MRDisplayAd()}};document.addEventListener(visibilityChangeType,AX,false);return }else{if(AE[AU].adDisplayed!=undefined&&AE[AU].adDisplayed==1){n("displayAd: Unable to display ad '"+AU+"' It has already been displayed.")}else{n("displayAd: Displaying ad '"+AU+"'.");plDiv=document.getElementById(AU);plDiv.metaAdObj=AE[AU].metaAdObj;if(AE[AU].localAdObj!=undefined){plDiv.localAdObj=AE[AU].localAdObj}plDiv.ClearAd=w;AE[AU].metaAdObj.isLoaded=0;if(AE[AU].metaAdObj.jsonAdObj.isBlank==0){plDiv.style.display="block";plDiv.align="center"}plDiv.ClearAd();var AV=AE[AU].adHolderDiv.callbackObj;var AW={};if(AE[AU].localAdObj&&AE[AU].localAdObj.CALLBACK){AW=AE[AU].localAdObj.CALLBACK}if(typeof AW.onembed=="function"){n("parseSingleAd: calling single ad 'onembed' callback");AW.onembed(AV)}AO.fireEvent("adOnembed",AV);plDiv.appendChild(AE[AU].adHolderDiv);AE[AU].okToDisplay=0;AE[AU].adDisplayed=1}}}}}}}};this.setupAdDiv=function(AT,AU){n("setupAdDiv: setting up div: "+AT);var AV=document.getElementById(AT);if(!AV){document.write("<div id='"+AT+"'></div>");n("setupAdDiv: a div named '"+AT+"' doesn't exist.  Creating DIV.  WARNING: NOT DOM SAFE");AV=document.getElementById(AT)}if(AU){MRSaveLocalAdObj(AT,AU);if(AU.WIDTH){AV.style.width=parseInt(AU.WIDTH)+"px"}if(AU.HEIGHT){AV.style.height=parseInt(AU.HEIGHT)+"px"}}};this.getDeferredAds=function(AU,AW){var AX=[];if(typeof (AU)=="undefined"||AU==null){var AY=0;for(var AV in AE){AX[AY++]=AV}}else{AX=AU}for(var AT=0;AT<AX.length;AT++){if(typeof (AE[AX[AT]])=="undefined"){n("getDeferredAds: Received command to load a DIV which has never been setup.  Cannot load '"+AX[AT]+"'")}else{AE[AX[AT]].okToDisplay=1;n("getDeferredAds: Setting okToDisplay to 1 for '"+AX[AT]+"'.")}}n("getDeferredAds: queueing up deferred ad request");if(!g){n("getDeferredAds: ERROR: Local file for friendly iframe not yet defined.  Set file location via setDeferredLocalPage(file_loc)")}else{p.push([AU,AW]);u()}};var u=function(){n("makeDeferredAdRequest: getting deferred ads ");if(p.length==0){n("makeDeferredAdRequest: no request args in the queue");return }if(!x){x=new A()}if(x.readyState!=x.READY){if(x.getAge()<b){n("makeDeferredAdRequest: request "+x.requestId+" is running, waiting 200 milliseconds");setTimeout(u,200);return }if(x.readyState==x.PROCESSING&&x.getProcessingTime()<50){n("makeDeferredAdRequest: request "+x.requestId+" is processing, waiting 50 milliseconds");setTimeout(u,50);return }n("makeDeferredAdRequest: request has taken too long ("+x.getAge()+" millis), aborting request");x.abort()}x.reserve();var AV=p.shift();var AT=AV[0];var AW=AV[1];if(AW){x.setCallbacks(AW)}if(AT&&AT.constructor.toString().indexOf("Array")==-1){n("ERROR: first argument to getDeferredAds() must be null or an Array");return }var AU=N.getAdCallURL("jph",null,null,null,AT);if(!AU){n("makeDeferredAdRequest: no adCall, aborting request");x.abort();return }x.adCall=AU;x.makeRequest(AU)};var A=function(){var Ad=this;this.READY=0;this.RESERVED=1;this.SENT=2;this.PROCESSING=3;this.readyState=Ad.READY;this.requestId=1;var AX;var AZ;var Ab=[];var AY={};var AU=null;var AV={};var AT=[];var Aa={};this.getAge=function(){if(!AX){return 0}return new Date().getTime()-AX};this.getProcessingTime=function(){if(!AZ){return 0}return new Date().getTime()-AZ};this.reserve=function(){n("reserve: reserving: "+Ad.requestId);if(Ad.readyState!=Ad.READY){n('ERROR: cannot reserve unless JSONPRequest is "READY"');return }Ad.readyState=Ad.RESERVED;AX=new Date().getTime();AY[Ad.requestId]=[];AV[Ad.requestId]=[];Aa[Ad.requestId]=[]};this.setProcessing=function(){n("setProcessing: setting to processing");if(Ad.readyState!=Ad.SENT){n('ERROR: cannot set to "PROCESSING" unless JSONPRequest is "SENT"');return }Ad.readyState=Ad.PROCESSING;AZ=new Date().getTime()};this.setCallbacks=function(Ae){n("setCallbacks: setting callbacks for req "+Ad.requestId);if(Ad.readyState!=Ad.RESERVED){n('ERROR: cannot set callbacks unless JSONPRequest is "RESERVED"');return }if(typeof Ae=="object"){AU=Ae.onembed;AV[Ad.requestId]=Ae.onload}};this.trackDiv=function(Ae){n("trackDiv: div: "+Ae);if(Ad.readyState!=Ad.RESERVED){n('ERROR: cannot add divIds unless JSONPRequest is "RESERVED"');return }AY[Ad.requestId].push(Ae);Ab.push(Ae)};this.trackDivProcessed=function(Ae,Ag){n("trackDivProcessed: processed "+Ae);if(!Ae){n("trackDivProcessed: no divId found");return }if(Ad.readyState!=Ad.PROCESSING){n('ERROR: cannot track processed divs unless JSONPRequest is "PROCESSING"');return }if(Ag){AT.push(Ag)}for(var Af=0;Af<Ab.length;Af++){if(Ab[Af]===Ae){Ab.splice(Af,1);break}}if(Ab.length==0){if(typeof AU=="function"){n("trackDivProcessed: calling request 'onembed' callback");AU(AT)}AO.fireEvent("reqOnembed",AT);Ac()}};this.trackDivLoaded=function(Ah,Ae,Ag){n("trackDivLoaded: loaded: reqId: "+Ah+", divId: "+Ae);if(!Ae){n("trackDivLoaded: no divId found");return }if(Ag){Aa[Ah].push(Ag)}for(var Af=0;Af<AY[Ah].length;Af++){if(AY[Ah][Af]===Ae){AY[Ah].splice(Af,1);break}}if(AY[Ah].length==0){if(typeof AV[Ah]=="function"){n("trackDivLoaded: calling request 'onload' callback");AV[Ah](Aa[Ah])}AO.fireEvent("reqOnload",Aa[Ah]);delete AY[Ah];delete AV[Ah];delete Aa[Ah]}};this.makeRequest=function(Ae){n("makeRequest: making request to "+Ae);if(Ad.readyState!=Ad.RESERVED){n('ERROR: cannot make requests unless JSONPRequest is "RESERVED"');return }Ad.readyState=Ad.SENT;Ae=Ae.replace("GLOBAL","GLOBAL&REQID="+Ad.requestId);AJ(Ae,"madJSONPReq"+Ad.requestId)};this.abort=function(){if(Ad.readyState==Ad.READY){n('abort: request is "READY", nothing to abort');return }n("abort: aborting request "+Ad.requestId);AW()};var Ac=function(){if(Ad.readyState==Ad.READY){n('close: request is "READY", nothing to close');return }n("close: closing request "+Ad.requestId);AW()};var AW=function(){var Ae=Ad.requestId++;AX=null;AZ=null;Ab=[];AU=null;AT=[];Ad.readyState=Ad.READY;W("madJSONPReq"+Ae)}};this.parseAdResponse=function(AU){if(!AU||parseInt(AU.requestId)!==x.requestId){n("parseAdResponse: not current request. "+(AU?AU.requestId:"no jsonAdResponse")+" vs "+x.requestId);return }n("parseAdResponse: requestId = "+AU.requestId+", divId = "+AU.divId);if(x.readyState==x.SENT){x.setProcessing()}var AT=J(AU);x.trackDivProcessed(AU.divId,AT)};function J(AW){if(!AW||AW.divId==null){n("parseSingleAd: ERROR: no div: "+AW.divId);return }var AX=AE[AW.divId];if(AX==undefined){n("parseSingleAd: Error: unable to save ad response for '"+AW.divId+"'");return }AX.adDisplayed=0;var AV={};if(AX.localAdObj&&AX.localAdObj.CALLBACK){AV=AX.localAdObj.CALLBACK;n("parseSingleAd: Added callbacks")}var AT;var AU=document.createElement("div");AU.className="adHolder";if(AW.adHTML){AU.adHTML=AW.adHTML}else{AU.adHTML=""}AU.innerHTML="<iframe src='"+g+"' class='adFrame' marginwidth='0' marginheight='0' hspace='0' vspace='0' frameborder='0' scrolling='no' allowtransparency='true' background-color='transparent' height='1' width='100%'></iframe>";AT={divId:AW.divId,segmentId:AW.segmentId,rotatorId:AW.rotatorId,creativeSizeId:AW.creativeSizeId,FIFPRE:((AX.localAdObj.FIFPRE!=undefined)?AX.localAdObj.FIFPRE:AW.FIFPRE),FIFPOST:((AX.localAdObj.FIFPOST!=undefined)?AX.localAdObj.FIFPOST:AW.FIFPOST),isFloat:-1,isBlank:AW.isBlank};AU.callbackObj=AT;if(typeof AV.onload=="function"){AU.callback=AV.onload}AU.reqId=x.requestId;AU.adCall=x.adCall;AU.RMIFOnLoad=RMIFOnLoad;AX.adHolderDiv=AU;if(!AX.metaAdObj){AX.metaAdObj=new Object()}AX.metaAdObj.reloadTimestamp=new Date();if(AW.seg_pageState!=null){n("parseSingleAd: seg_pageState is not null");N.setSegPageState(AX.id,AW.seg_pageState)}AX.metaAdObj.jsonAdObj=AW;if(AE[AW.divId].okToDisplay==1){MRDisplayAd(AW.divId)}else{n("parseSingleAd: okToDisplay for '"+AW.divId+"' is "+AE[AW.divId].okToDisplay+" not 1.")}return AT}this.RMIFOnLoad=function(AX,Ab){var AV=AX.frameElement;var AT=AV.parentNode;var AU=AV.parentNode.parentNode;var AY=Ab.getElementById("adDiv");var AW;var Ac;AU.style.width="auto";AU.style.height="auto";AE[AT.callbackObj.divId].overrideAdObj=new Object();if(AT.callbackObj.isBlank==1){AT.callbackObj.isFloat=0;if(AU.localAdObj.DEFHTML==undefined){AU.style.display="none";n("RMIFOnLoad: '"+AT.callbackObj.divId+"' ad is blank and there is no DEFHTML.  Hiding the placeholder.")}else{var AZ=document.createElement("span");AZ.className="defhtml";if(typeof (AU.localAdObj.DEFHTML)!="undefined"){AZ.innerHTML=AU.localAdObj.DEFHTML}AU.insertBefore(AZ,AT);AV.style.display="none";n("RMIFOnLoad: ad is blank but there is DEFHTML.  Hiding the iframe.")}}else{var Aa=document.createElement("span");Aa.className="fifpre";if(typeof (AT.callbackObj.FIFPRE)!="undefined"){Aa.innerHTML=AT.callbackObj.FIFPRE}AU.insertBefore(Aa,AT);var Ad=document.createElement("span");Ad.className="fifpost";if(typeof (AT.callbackObj.FIFPOST)!="undefined"){Ad.innerHTML=AT.callbackObj.FIFPOST}AU.insertBefore(Ad,null);if(AT.childNodes.length==1){AW=AY.offsetHeight;AT.callbackObj.isFloat=0;AV.style.width="100%";AV.style.height=AW+"px";AV.style.marginRight="auto";AV.style.marginLeft="auto";n("RMIFOnLoad: '"+AT.callbackObj.divId+"' ad is not blank and not float.  Setting height/width of iframe. h= "+AW+" w=100%")}else{AT.callbackObj.isFloat=1;AV.style.width="0px";AV.style.height="0px";AV.style.display="none";n("RMIFOnLoad: ad is not blank but is a float ad.  Hiding the iframe.")}}if(typeof AT.callback=="function"){n("RMIFOnLoad: calling single ad 'onload' callback");AT.callback(AT.callbackObj)}AO.fireEvent("adOnload",AT.callbackObj);x.trackDivLoaded(AT.reqId,AU.getAttribute("id"),AT.callbackObj);if(AU.metaAdObj){AU.metaAdObj.isLoaded=1}};function w(){this.style.width=this.offsetWidth+"px";this.style.height=this.offsetHeight+"px";P(this)}function P(AU){var AT=null;while(AU.childNodes.length>0){var AW=AU.childNodes[0];var AV=AW.id;if(AV=="adFrame"){AT=AW;AT.src="about:blank"}if(AV){AW.id=""}if(AW.childNodes.length>0){P(AW)}AU.removeChild(AW)}}this.prepareRefresh=function(AV,AU){var AT=AE[AV];if(AT==undefined){n('prepareRefresh: could not find information about id "'+AV+'"');return }AT.overrideAdObj=AU;n("prepareRefresh: Adding override object for ad '"+AV+"'.")};this.setDeferredLocalPage=function(AT){n("setDeferredLocalPage: file set to "+AT);if(AT){g=AT}};var AD=function(){window.CBSI_PAGESTATE=""};this.storePageStateCookie=function(AU,AV,AT){n("storePageStateCookie: Attempting to store cookie.");if(!AU){AU="cbs.com"}if(!AV){AV="/pacific"}if(!AT){AT=300000}var AX=window.CBSI_PAGESTATE;if(!AX){AX=""}Q("MAD_PAGESTATE",encodeURIComponent(AX),AT,AU,AV);var AW=N.getCombPageState([],",");if(!AW){AW=""}Q("MAD_COMB_PAGESTATE",encodeURIComponent(AW),AT,AU,AV)};var AR=0;this.getAsyncAd=function(AU,AT){if(AR==0){v("MR3-test-function-getAsyncAd-invoked");AR=1}};this.LoadAds=function(){if(AR==0){v("MR3-test-function-RefreshAds-invoked");AR=1}};this.DivGetAdURL=function(AT){};this.getAdCallURL=function(Ab,AT,AZ,AY,AV){var AU="";var Af=new Object();var AX="";if(!AY){AY=f}S(Af,AY);if(AT!=null){S(Af,AT)}if(AZ!=null){S(Af,AZ)}AU+=h(Ab,Af);if(Ab.toLowerCase()!="jph"){AU+=I(Ab,AY);Af=new Object();S(Af,AT);S(Af,AZ);AU+=t(Af)}else{AV=K(AV);AU+=I(Ab,AY,"%3B",AV);if(!AV){var AW=false;for(var Ae in AE){if(AE.hasOwnProperty(Ae)&&AE[Ae].localAdObj&&AE[Ae].localAdObj.NCAT!==undefined){AW=true;break}}if(AW){var Ac="";if(AY&&AY.NCAT!=null){Ac=AY.NCAT}for(var Ae in AE){if(AE.hasOwnProperty(Ae)&&AE[Ae].localAdObj&&AE[Ae].localAdObj.NCAT===undefined){AE[Ae].localAdObj.NCAT=Ac}}}}else{var AW=false;for(var Aa=0;Aa<AV.length;Aa++){var Ad=AE[AV[Aa]];if(Ad&&Ad.localAdObj&&Ad.localAdObj.NCAT!==undefined){AW=true;break}}if(AW){var Ac="";if(AY&&AY.NCAT!=null){Ac=AY.NCAT}for(var Aa=0;Aa<AV.length;Aa++){var Ad=AE[AV[Aa]];if(Ad&&Ad.localAdObj&&Ad.localAdObj.NCAT===undefined){Ad.localAdObj.NCAT=Ac}}}}if(!AV){for(var Ae in AE){if(AE.hasOwnProperty(Ae)){AX+=F(Ae)}}}else{for(var Aa=0;Aa<AV.length;Aa++){if(AE[AV[Aa]]){AX+=F(AV[Aa])}}}if(AX==""){AU=null}else{AU+=AX}}if(AU&&AU.length>2000){AU=AU.match(/.{0,2000}\&/)[0]}return AU};this.getAd=function(AU,AV){var AT=N.getAdCallURL("js",AU,new Object(),AV);document.write("<script type='text/javascript' src='"+AT+"'><\/script>\n")};this.cnetGetAd=function(AT){N.getAd(AT,new Object())};var h=function(AX,Ab){if(!Ab){Ab=new Object();S(Ab,f)}E(Ab);var AV="";var AZ="http://mads.";if(Ab.USE_HTTPS){AZ="https://smads."}var AT=AS;var AW="";if(D.length>0){AW=":"+D}if(o()||(Ab.STAGING=="1")){AZ="http://madstage.";AW=":8000"}else{if(Ab.AD_HOST){AZ=Ab.AD_HOST;AT="";AW=""}}var AU=q()?"cnet-ad":"mac-ad";var AY=Y("MADMACHOST");var Aa=Y("MADMACPORT");if(AY){if(Aa){AW=":"+Aa}else{AW=""}AV=AY+AW+"/"+AU+"?"}else{AV=AZ+AT+AW+"/"+AU+"?"}if(!AV.match(/^http/i)){AV="http://"+AV}return AV};this.setSegPageState=function(AT,AU){if(AE[AT]){if(!AE[AT].metaAdObj){AE[AT].metaAdObj=new Object()}AE[AT].metaAdObj.seg_pageState=AU}};this.getFullPageState=function(AT){var AU="&PAGESTATE=";if(AM.USE_STATICPAGESTATE==1){if(AM.STATICPAGESTATE){AU+=encodeURIComponent(AM.STATICPAGESTATE)}}else{if(window.CBSI_PAGESTATE){AU+=encodeURIComponent(window.CBSI_PAGESTATE)}}if(typeof (listOfAdsReload)=="undefined"||AT.length==0){}else{var AV=N.getCombPageState(AT,",");if(AV!=""){AU+="&COMB_PAGESTATE="+AV}}return AU};this.getCombPageState=function(AU,AX){var AY="";for(var AT in AE){if(!AE.hasOwnProperty(AT)){continue}var AW=false;for(var AV=0;AV<AU.length;AV++){if(AU[AV]==AT){AW=true;break}}if(!AW&&AE[AT].metaAdObj.seg_pageState!=undefined){AY+=AE[AT].metaAdObj.seg_pageState+AX}}return AY};var I=function(Am,Ae,AW,Ai){var AT="";if(!Ae){Ae=new Object();S(Ae,f)}k(Ae);Ae.DVAR_INSTLANG=X();var AU=Y("MADMACHOST");if(AU){var Al=AU.split(".").reverse();var AZ=Al[1]+"."+Al[0];if(AZ!=AS){var Aj=Y("MADHOST");if(Aj){Ae.MADHOST=Aj}var Af=Y("MADPORT");if(Af){Ae.MADPORT=Af}var Ab=Y("MAD_STAGED_EXCLUSIVE");if(Ab){Ae.MAD_STAGED_EXCLUSIVE=Ab}}}if(AW){AT+="META&ADSEPARATOR="+AW+"&"}AT+="GLOBAL";AT+="&CLIENT:ID=SJS";AT+="&CELT="+Am;var Ak=null;if(location.hash.substring(1,12).toLowerCase()=="mad_preview"){Ak=location.hash.substring(13);n("MAD_PREVIEW in hash. Value: "+location.hash.substring(13))}else{var Ag=(new RegExp("[\\?&]mad_preview=([^&#]*)")).exec(window.location.href.toLowerCase());if(Ag!=null){Ak=Ag[1];n("MAD_PREVIEW passed as variable. Value: "+Ag[1])}}if(Ak!=null){Ak=Ak.replace(/%7C/gi,"|");if(new RegExp("^[0-9]+(\\|[0-9]+)*$").exec(Ak)){AT+="&COOKIE:MADVALSEG="+Ak}}AT+=N.getFullPageState(Ai);var AV=Y("XCLGFbrowser");if(AV){Ae["COOKIE:ANON_ID"]=AV}for(var AX in Ae){if(!Ae.hasOwnProperty(AX)){continue}var Aa=Ae[AX];if(T[AX]){AX=T[AX]}if(AX!="STAGING"&&AX!="AD_HOST"&&AX!="USE_HTTPS"&&(AX.match(/^DVAR_.+/i)==null||!(Aa==""||Aa==" "))){AT+="&"+encodeURIComponent(AX)+"="+encodeURIComponent(Aa)}}var Ac="";if(window.location.protocol.match(/https:/i)){Ac="&referer="+encodeURIComponent(window.location.href)}var Ad="";if(document.referrer&&document.referrer.length>0){var An=document.referrer.replace(/^[^\/]+:\/\//,"");var Ao=An.replace(/[^\w\-\.].*$/,"");var Ah=Ao.match(/[^\.]+\.\w{2,4}$/);if(Ah){Ad="&IREFER_HOST="+encodeURIComponent(Ah)}}var AY=Math.floor(Math.random()*100000000);AT+="&x-cb="+AY+Ac+Ad;return AT};var t=function(AV,AU){var AY="&ADREQ";var AT=new Object;S(AT,AV);S(AT,AU);k(AT);for(var AX in AT){if(!AT.hasOwnProperty(AX)){continue}var AW=AT[AX];if(T[AX]){AX=T[AX]}if(AX!="STAGING"&&AX!="AD_HOST"&&AX!="REFRESH"&&AX!="CALLBACK"&&AX!="FIFPRE"&&AX!="FIFPOST"&&AX!="DEFHTML"&&(AX.match(/^DVAR_.+/i)==null||!(AW==""||AW==" "))){AY+="&"+encodeURIComponent(AX)+"="+encodeURIComponent(AW)}}if(AY=="&ADREQ"){AY=""}return AY};var F=function(AT){if(AN(AT)){x.trackDiv(AT);var AU=t(AE[AT].localAdObj,AE[AT].overrideAdObj);AU+="&divId="+AT;return AU}return""};var AN=function(AT){var AU=AE[AT].metaAdObj;if(!AU){return false}return(!AU.reloadTimestamp||(AU.refreshable==1&&(new Date().getTime()-AU.reloadTimestamp.getTime()>=AB))||(AU.refreshable==0&&AU.isLoaded==0))};var K=function(AU){var AT=new Array();if(!AU){for(var AV in AE){if(AE.hasOwnProperty(AV)&&AN(AV)){AT.push(AV)}}}else{for(var AW=0;AW<AU.length;AW++){var AV=AU[AW];if(AE.hasOwnProperty(AV)&&AN(AV)){AT.push(AV)}}}return AT};function V(){n("In loadBK() function");var AU=document.getElementById("__bkframe");if(!AU){AU=document.createElement("iframe");AU.id="__bkframe";AU.name="__bkframe";AU.style.display="none";var AT=document.getElementsByTagName("body")[0];if(AT){AT.appendChild(AU)}}var AV=AJ("http://www.bkrtx.com/js/bk-static.js");AV.onload=C;AV.onreadystatechange=function(){if(this.readyState==="loaded"||this.readyState==="complete"){C()}}}function C(){var Ab=f;var AZ;var AX=0;var AY={1:3321,2:3319,3:3325,4:3328,6:3338,7:3322,8:3331,9:3324,11:3318,19:3339,21:3340,23:3316,39:4511,45:3334,50:3341,53:3329,90:3336,101:3337,102:3323,103:3335,105:3326,109:3327,139:3320,162:3330,164:3332,175:3344,177:3345,185:3346,189:3348,252:3317,1018:5829,1019:5830};if(Ab.BK_REGION){if(Ab.BK_REGION.toLowerCase()=="uk"){AY[1]=14111;AY[55]=14113;AY[6]=14115;AY[1015]=14117;AY[45]=14119;AY[4]=14737}else{if(Ab.BK_REGION.toLowerCase()=="fr"){AY[51]=14123;AY[6]=14125;AY[11]=14151;AY[4]=14735}else{if(Ab.BK_REGION.toLowerCase()=="au"){AY[70]=14153;AY[6]=14155;AY[1012]=14157;AY[45]=14159;AY[4]=14733}else{if(Ab.BK_REGION.toLowerCase()=="asia"){AY[84]=14691;AY[6]=14727;AY[4]=14731;AY[1014]=14693}}}}}AX=AY[Ab.SITE]||2834;n("callBK: bkSiteId is: "+AX);var Aa=Y("XCLGFbrowser");if(Aa){bk_addPageCtx("anon_id",Aa);n("callBK(): Adding hint: anon_id value:"+Aa)}for(var AT in Ab){if(!Ab.hasOwnProperty(AT)){continue}var AU=""+Ab[AT];AZ=AT.toLowerCase();if(AZ=="dvar_user_group"){AZ="user-group"}if(AZ=="dvar_tag"){AZ="tag"}if(AZ=="dvar_keyword"){AZ="keyword"}var AV;if(AZ in {ncat:1,site:1,ptype:1,cid:1,tag:1,"user-group":1,keyword:1,dvar_familyid:1,dvar_universeid:1,dvar_attr:1,attr:1,dvar_carrier:1,carrier:1,dvar_gameid:1,gameid:1,dvar_gsgenre:1,gsgenre:1,dvar_mfg:1,mfg:1,dvar_os:1,os:1,buyingcycle:1}){if(AZ=="tag"||AZ=="user-group"||AZ=="keyword"){var Ac=AU.split(";");for(var AW=0;AW<Ac.length;AW++){bk_addPageCtx(AZ,Ac[AW].toLowerCase());n("callBK(): Adding hint: "+AZ+" value:"+Ac[AW].toLowerCase())}}else{if(AZ.substring(0,5)=="dvar_"){AV=AZ.substring(5)}else{AV=AZ}bk_addPageCtx(AV,AU);n("callBK(): Adding hint: "+AV+" value:"+AU)}}}bk_doJSTag(AX,4)}this.prepBK=function(AT){if(AT.cookievalue){j(AT.cookievalue)}};this.adBehavioralSetup=function(){n("adBehavioralSetup() called.  LOAD_BK="+AH);if(AH==1){V()}};this.getAdBehavioral=function(){};function j(AX){n("In updateMADUCATCookie() function");if(!R){R=1;if(typeof AX!="undefined"&&AX!=""){var AT=1;var AW=d;var AV=2592000000;var AU=new Date();var AY=AT;AY+=AW;AY+=AK(AU);AX=AX.substr(0,600);AX=AX.substr(0,AX.lastIndexOf("&"));AY=AY+AW+"BK"+AX;n("new cookie calculated: "+AY);Q("MADUCAT",AY,AV)}else{n("No values passed.  Cookie unchanged.")}}}this.clearAdState=function(){n("clearAdState: clearing ad state");if(x){x.abort()}p=[];window.CBSI_PAGESTATE="";AM={};f={};i=null;AE=[];AB=AP;AO.clearEvents()};this.treatAsBlank=function(AU,AT){n("treatAsBlank called.");if(typeof (AU.frameElement.parentNode.callbackObj)!="undefined"&&typeof (AU.frameElement.parentNode.callbackObj.isBlank)!="undefined"){AU.frameElement.parentNode.callbackObj.isBlank=1}};function AL(){AJ("http://madison.cnet.com/common/bookmarklet/Watson.js")}var AF=function(){if("NO"!="yes"){AL()}};var M=function(){};this.isInternalUserCB=function(AU){var AT=180*86400000;if(AU){Q("MAD_INTERNAL",1,AT);AF()}else{Q("MAD_INTERNAL",0,AT);M()}};var AI=function(){var AT=Y("MAD_INTERNAL");if(AT==null){AJ("http://i.i.cbsi.com/cnwk.1d/Ads/common/manta/isInternalUser.js?cb=cbsiMadIsInternalUserCB")}else{if(AT==1){AF()}else{M()}}};setTimeout(AI,3000);if(AH==1&&!(/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&new Number(RegExp.$1)<=7)){var G=new Date().getTime();AJ("http://i.i.cbsi.com/cnwk.1d/Ads/common/manta/derefbkcookie.js?"+G)}var a=function(){var AT=[];this.subscribe=function(AU){AT.push(AU)};this.unsubscribe=function(AW){for(var AU=0,AV=AT.length;AU<AV;AU++){if(AT[AU]===AW){return AT.splice(AU,1)}}return undefined};this.fire=function(){for(var AU=0,AV=AT.length;AU<AV;AU++){AT[AU].apply(this,arguments)}}};var s=function(AW){if(AW&&AW.constructor.toString().indexOf("Array")==-1){throw"Invalid Parameter to jsEvents: '"+AW+"', parameter should be left out, undefine, or Array<eventTypes>"}var AU={};var AV=function(Aa,AX){for(var AY=0,AZ=AX.length;AY<AZ;AY++){if(Aa==AX[AY]){return true}}return false};var AT=function(AX){if(!AX||typeof AX!="string"){throw"Invalid Event Type '"+AX+"'"}if(AW&&!AV(AX,AW)){throw"Invalid Event Type '"+AX+"'. Valid Types: "+AW}};this.addEventListener=function(AX,AZ){if(typeof AZ!="function"){throw"Event Listener Is Not A Function: "+AZ}AT(AX);n("adding listener "+AZ+" for event "+AX);var AY=AU[AX];if(!AY){AY=new a();AU[AX]=AY}AY.subscribe(AZ)};this.removeEventListener=function(AX,AZ){n("removing listener "+AZ+" for event "+AX);var AY=AU[AX];if(!AY){return undefined}return AY.unsubscribe(AZ)};this.clearEvents=function(){n("clearing events");AU={}};this.fireEvent=function(AY,AX){AT(AY);var AZ=AU[AY];if(!AZ){return }n("firing event "+AY);AZ.fire(AX)}};var AO=new s(["adOnembed","adOnload","reqOnembed","reqOnload"]);this.addEventListener=AO.addEventListener;this.removeEventListener=AO.removeEventListener;n("Loaded MantaRay.  Revision: "+r)}if(!window.cbsiMantaRay){window.cbsiMantaRay=new CbsiMantaRay();var cbsiGetAd=cbsiMantaRay.getAd;var cbsiRegisterAdGlobals=cbsiMantaRay.registerAdGlobals;var cbsiSetWaitTime=cbsiMantaRay.setWaitTime;var cbsiStorePageStateCookie=cbsiMantaRay.storePageStateCookie;var cbsiClearAdState=cbsiMantaRay.clearAdState;var cbsiTreatAsBlank=cbsiMantaRay.treatAsBlank;var MRSaveLocalAdObj=cbsiMantaRay.saveLocalAdObj;var MRFetchAds=cbsiMantaRay.fetchAds;var MRDisplayAd=cbsiMantaRay.displayAd;var cbsiMantaAddEventListener=cbsiMantaRay.addEventListener;var cbsiMantaRemoveEventListener=cbsiMantaRay.removeEventListener;var cbsiGetDeferredAds=cbsiMantaRay.getDeferredAds;var cbsiSetupAdDiv=cbsiMantaRay.setupAdDiv;var cbsiPrepareRefresh=cbsiMantaRay.prepareRefresh;var RMIFOnLoad=cbsiMantaRay.RMIFOnLoad;var cbsiParseAdResponse=cbsiMantaRay.parseAdResponse;var cbsiSetDeferredLocalPage=cbsiMantaRay.setDeferredLocalPage;var cbsiAdBehavioral=cbsiMantaRay.getAdBehavioral;var cbsiAdBehavioralSetup=cbsiMantaRay.adBehavioralSetup;var cbsiPrepBK=cbsiMantaRay.prepBK;var cbsiMadIsInternalUserCB=cbsiMantaRay.isInternalUserCB;var cbsiStorePageState=cbsiMantaRay.storePageState;var cnetGetAd=cbsiMantaRay.cnetGetAd;var cbsiSetMacProxy=cbsiMantaRay.setMacProxy;var cbsiSetAdvancedAsync=cbsiMantaRay.setDeferredLocalPage;var cbsiGetAsyncAd=cbsiMantaRay.getAsyncAd;var cbsiRefreshAds=cbsiMantaRay.LoadAds;var cbsiDivGetAdURL=cbsiMantaRay.DivGetAdURL};
  